
FITSVER=	2.470
CALFUSEDIR=	${PWD}/../../..

# Symbols for include directories
FUSEINCLDIR=	-I${CALFUSEDIR}/include

# Symbols used for compiling
CC=		cc
#  Romelfanger's optimizations
# OPT=		-fast -xO5 -xtarget=ultra2 -xarch=v8plusa
#
#  SunWorld's optimizations
# OPT=		-p -v -xO2 -xdepend -xchip=ultra -xarch=generic
OPT=		-O -DCFORTRAN -KPIC -DSOLARIS
CFLAGS=		${OPT} ${FUSEINCLDIR}

# Symbols used for creating shared binaries
FUSEBINDIR=	${CALFUSEDIR}/bin
FUSELIBDIR=	-L${CALFUSEDIR}/lib
LIBDIR=		-L/opt/SUNWspro/lib
FUSELIBS=	-lsla -lcfitsio-${FITSVER} -lcf
LIBS=		-lc -lm -lnsl -ldl -lsocket -lsunmath -lM77 -lF77
LDFLAGS=	-Wl,-R${CALFUSEDIR}/lib

# binaries to be made

BINS=		cf_jitter_diag cf_jitter

all:		${BINS}
		chmod g+rw ${BINS}

install:	all
		/bin/cp ${BINS} ${FUSEBINDIR}

clean:
		/bin/rm -f *.o ${BINS}

distclean:
		/bin/rm -f *.o ${BINS}
		cd ../../../bin; /bin/rm -f ${BINS}

cf_jitter_diag:	cf_jitter_diag.c
		${CC} ${CFLAGS} -o cf_jitter_diag cf_jitter_diag.c \
		${FUSELIBDIR} ${LIBDIR} ${FUSELIBS} ${LIBS} ${LDFLAGS}

cf_jitter:	cf_jitter.c
		${CC} ${CFLAGS} -o cf_jitter cf_jitter.c \
		${FUSELIBDIR} ${LIBDIR} ${FUSELIBS} ${LIBS} ${LDFLAGS}

