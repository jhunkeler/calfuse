
SHARED=		-shared
FITSVER=	2.470
CALFUSEDIR=	${PWD}/../..

# Symbols for include directories
FUSEINCLDIR=    -I${CALFUSEDIR}/include

# Symbols used for compiling
CC=             cc
OPT=            -O -DCFORTRAN -KPIC -DSOLARIS
CFLAGS =	${OPT} ${FUSEINCLDIR}

# Symbols used for creating shared binaries
FUSEBINDIR=     ${CALFUSEDIR}/bin
FUSELIBDIR=     -L${CALFUSEDIR}/lib
LIBDIR=         -L/opt/SUNWspro/lib
FUSELIBS=       -lsla -lcfitsio-${FITSVER} -lcf
LIBS=           -lc -lm -lnsl -ldl -lsocket -lsunmath -lM77 -lF77
LDFLAGS=        -Wl,-R${CALFUSEDIR}/lib

OBJECTS=	cf_calfes.o cf_fes_init.o cf_fes_read.o cf_fes_write.o \
		cf_fes_cal.o cf_fes_get_cal_image.o cf_limbang.o \
		cf_fes_apply_bias.o cf_fes_apply_flat.o cf_fes_apply_mask.o 

all:		cf_calfes

cf_calfes:	${OBJECTS}
		${CC} ${CFLAGS} -o cf_calfes ${OBJECTS} \
		${FUSELIBDIR} ${LIBDIR} ${FUSELIBS} ${LIBS} ${LDFLAGS}
		chmod g+rw cf_calfes

install:	cf_calfes
		/bin/cp cf_calfes ${FUSEBINDIR}

clean:
		/bin/rm -f ${OBJECTS} cf_calfes

distclean:
		/bin/rm -f ${OBJECTS} cf_calfes
		cd ../../bin; /bin/rm -f cf_calfes

lint:		${SOURCES}
		lint ${SOURCES}
